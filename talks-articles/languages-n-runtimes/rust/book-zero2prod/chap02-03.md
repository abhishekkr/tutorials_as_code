
## Chapter.2 Building an Email Newsletter

> building an MVP to learn

* Newsletter features

> * Allow Visitors, subscribing to a Newsletter
> * Allow Newsletter Owner, send emails to all subscribers
> * Allow Subscriber, to unsubscribe.
> MVP is for a single newsletter, without subscriber segmentation or tracking


## Chapter.3 Allow Visitors to Subscribe

> user flow: visitors to subscribe via a web form calling backend API `POST /subscription`

* need a web framework, testing strategy, db crate, migrations, etc.

* `actix_web` framework would be used, it's based on tokio (so would need add both to dependencies) and is highly performant

* `cargo check` for code vaildity & `cargo build` to check+gen binary

* `cargo install cargo-edit` provides `cargo add actix-web --vers 4.0.0` like commands to add deps via cli

* `cargo run` to build & run

* for `actix_web`

> * `HttpServer` takes care of binding, connection concurrency, TLS, etc.
>
> * `App` passed to it has all application logic on routing, middlewares, request handlers, etc.
>
> * request handler async function `greet()` takes `HttpRequest` and returns anything implementing `Responder` trait
>
> * request handlers can have a wide range of signatures

* `#[tokio::main]` macro allows `main` to be async as it calls async `HttpServer::run`; Rust's stdlib doesn't include a default async runtime

* if used `cargo expand` with nightly build, can see macro expansion of the code i.e. uses entire block and blocks thread on it

---

